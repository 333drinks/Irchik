<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Для Ирчика ❤️</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@600&family=Montserrat:wght@600&family=Cormorant+Garamond:ital,wght@1,600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  height:100vh;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Great Vibes', cursive;
  background-image:url("photo.jpg");
  background-size:220px;
  background-repeat:repeat;
  background-position:center;
}

body::before{
  content:"";
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  z-index:0;
}

.heart{
  position:fixed;
  top:-20px;
  color:white;
  font-size:18px;
  animation:fall linear forwards;
  pointer-events:none;
  z-index:1;
}

@keyframes fall{
  to{
    transform:translateY(110vh);
    opacity:0;
  }
}

.card{
  background:rgba(255,255,255,.95);
  padding:25px 30px;
  border-radius:18px;
  text-align:center;
  width:min(90vw,360px);
  box-shadow:0 15px 40px rgba(0,0,0,.4);
  position:relative;
  z-index:5;
}

h1{
  font-size:clamp(22px,5vw,32px);
  color:#ff2f65;
  margin-bottom:20px;
}

.buttons{
  display:flex;
  justify-content:center;
  gap:16px;
}

button{
  font-family:'Montserrat', sans-serif;
  font-weight:600;
  font-size:18px;
  padding:10px 20px;
  border:none;
  border-radius:12px;
  cursor:pointer;
  transition:.25s;
}

#yes{
  background:#ff2f65;
  color:white;
}

#no{
  background:white;
  color:#ff2f65;
  z-index:9999;
}

.big{
  position:fixed;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Cormorant Garamond', serif;
  font-style:italic;
  font-size:clamp(30px,6vw,48px);
  color:white;
  text-align:center;
  background:rgba(0,0,0,.6);
  opacity:0;
  transition:.4s;
  pointer-events:none;
  z-index:20;
}

.big.show{ opacity:1; }

canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:19;
}

@keyframes dust {
  0% { opacity:1; filter:blur(0px); transform:scale(1); }
  100% { opacity:0; filter:blur(8px); transform:scale(1.3); }
}

.dusted {
  animation:dust 0.8s forwards;
}
</style>
</head>

<body>

<div class="card">
  <h1>Ирчик, будешь моей валентинкой?</h1>
  <div class="buttons">
    <button id="yes">Да ♥</button>
    <button id="no">Нет</button>
  </div>
</div>

<div id="big" class="big">
  УРА! ЛЮБЛЮ ТЕБЯ, ЗАЙЧИК ♥
</div>

<canvas id="confetti"></canvas>

<script>
const yes = document.getElementById("yes");
const no  = document.getElementById("no");
const big = document.getElementById("big");
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

/* Исправленный порядок слов */
const texts = ["Нет","Попался","Жук","Я тебе","Жопу","Откушу"];

let i = 0;
let scale = 1;
let finalHits = 0;

function moveNo(){

  if(i < texts.length - 1){
    i++;
    no.innerText = texts[i];
  } else {
    finalHits++;
    if(finalHits >= 3){
      no.classList.add("dusted");
      setTimeout(()=> no.style.display="none", 800);
      return;
    }
  }

  scale += 0.15;
  yes.style.transform = "scale(" + scale + ")";

  const w = no.offsetWidth;
  const h = no.offsetHeight;
  const padding = 10;

  const maxX = window.innerWidth - w - padding;
  const maxY = window.innerHeight - h - padding;

  const x = Math.random() * maxX;
  const y = Math.random() * maxY;

  no.style.position = "fixed";
  no.style.left = x + "px";
  no.style.top  = y + "px";
}

no.addEventListener("mouseenter", moveNo);
no.addEventListener("click", function(e){
  e.preventDefault();
  moveNo();
});

let pieces = [];

function createConfetti(){
  pieces = [];
  for(let i=0;i<250;i++){
    pieces.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height - canvas.height,
      size: 6 + Math.random()*8,
      speed: 2 + Math.random()*4,
      angle: Math.random()*360,
      color: `hsl(${Math.random()*360}, 90%, 60%)`
    });
  }
}

function drawConfetti(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  pieces.forEach(p=>{
    ctx.save();
    ctx.translate(p.x, p.y);
    ctx.rotate(p.angle);
    ctx.fillStyle = p.color;
    ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
    ctx.restore();

    p.y += p.speed;
    p.angle += 0.02;
  });

  requestAnimationFrame(drawConfetti);
}

yes.addEventListener("click", function(){
  big.classList.add("show");
  createConfetti();
  drawConfetti();
});

function createHeart(){
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerText = "♥";
  heart.style.left = Math.random() * window.innerWidth + "px";
  heart.style.animationDuration = (4 + Math.random()*4) + "s";
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),8000);
}

setInterval(createHeart, 400);
</script>

</body>
</html>
